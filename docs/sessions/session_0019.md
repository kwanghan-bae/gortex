# Session 0019

## Goal
- 에이전트 간 상호 평가 및 자원 할당 경제 시스템 고도화 (Peer Review Economy v1)

## What Was Done
- **core/state.py 수정**: 에이전트별 가상 화폐 자산을 추적하기 위한 `token_credits` 필드 추가.
- **agents/analyst.py 수정**: 상호 검증(`cross_validate`) 성공 시 해당 작업을 수행한 에이전트에게 크레딧을 보상으로 지급하는 로직 강화.
- **agents/manager.py 수정**: 보유 크레딧에 따라 고성능 모델(`gemini-1.5-pro`) 사용 권한을 부여하고 사용료를 차감하는 경제 기반 모델 할당 로직 구현.
- **main.py 연동**: 세션 간 크레딧 정보를 보존하고 스트리밍 루프에서 실시간 업데이트하도록 통합.

## Decisions
- 고성능 모델 사용료를 50.0 크레딧으로 설정하여, 에이전트가 우수한 성과를 내야만 고급 자원을 사용할 수 있는 경쟁적 선순환 구조를 유도함.
- 초기 크레딧을 100.0으로 설정하여 최소 2회의 고성능 모델 사용 기회를 부여함.

## Problems / Blockers
- 현재는 크레딧이 소진될 경우 단순히 기본 모델로 폴백함. 향후 크레딧을 대출하거나 에이전트 간에 송금할 수 있는 더 복잡한 경제 시나리오 검토 가능.

## Notes for Next Session
- 시스템의 '물리적 최적화'를 위해, 대규모 프로젝트에서 파일 수정 시 영향을 받는 범위를 시각적으로 강조하고 위험을 사전에 차단하는 'Visual Impact Highlighter' 웹 UI 기능이 필요함.
